!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);(()=>{let e="default";function t(e){const t=e.target.getElementsByTagName("span")[0],n=window.getComputedStyle(t).backgroundColor,r=document.getElementById("cur-color"),a=window.getComputedStyle(r).backgroundColor;a!==n&&(r.style.backgroundColor=n,document.getElementById("prev-color").style.backgroundColor=a)}function n(e,t,n){e.target.style.left=`${e.pageX-t}px`,e.target.style.top=`${e.pageY-n}px`}document.getElementById("transform").addEventListener("click",t=>{document.body.style.cursor="url(../palette/assets/images/transform.png), auto",e="transform",t.target.classList.includes("active")||t.target.classList.add("active")}),document.getElementById("paint-bucket").addEventListener("click",t=>{document.body.style.cursor="url(../palette/assets/images/backet.png), auto",document.getElementsByClassName("active")[0].classList.remove("active"),e="paint",t.target.classList.add("active")}),document.getElementById("color-picker").addEventListener("click",t=>{document.body.style.cursor="url(../palette/assets/images/picker.png), auto",document.getElementsByClassName("active")[0].classList.remove("active"),e="picker",t.target.classList.add("active")}),document.getElementById("default").addEventListener("click",t=>{document.body.style.cursor="default",document.getElementsByClassName("active")[0].classList.remove("active"),e="default",t.target.classList.add("active")}),document.getElementById("move").addEventListener("click",t=>{document.body.style.cursor="url(../palette/assets/images/move.png), auto",document.getElementsByClassName("active")[0].classList.remove("active"),e="move",t.target.classList.add("active")}),document.getElementById("custom-color").addEventListener("change",e=>{const t=e.target.value,n=document.getElementById("cur-color"),r=window.getComputedStyle(n).backgroundColor;r!==t&&(n.style.backgroundColor=t,document.getElementById("prev-color").style.backgroundColor=r)}),document.getElementById("prev-btn").addEventListener("click",function(e){const t=e.target.getElementsByTagName("span")[0],n=document.getElementById("cur-color"),r=window.getComputedStyle(n).backgroundColor;n.style.backgroundColor=window.getComputedStyle(t).backgroundColor,t.style.backgroundColor=r}),document.getElementById("red-btn").addEventListener("click",t),document.getElementById("blue-btn").addEventListener("click",t),document.body.addEventListener("click",t=>{"transform"===e?function(e){const t=e.target,{className:n}=t;(n.includes("square")||n.includes("circle"))&&t.classList.toggle(n.includes("square")?"circle":"square")}(t):"paint"===e?function(e){const t=e.target,{id:n}=t;n.includes("fig")&&(t.style.backgroundColor=window.getComputedStyle(document.getElementById("cur-color")).backgroundColor)}(t):"picker"===e&&"color-picker"!==t.target.id&&function(e){const t=window.getComputedStyle(document.elementFromPoint(e.x,e.y)).backgroundColor,n=document.getElementById("cur-color"),r=window.getComputedStyle(n).backgroundColor;r!==t&&(n.style.backgroundColor=t,document.getElementById("prev-color").style.backgroundColor=r)}(t)}),document.body.addEventListener("mousedown",t=>{if("move"===e&&t.target.id.includes("fig")){const e=function(e){const t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}}(t.target),r=t.pageX-e.left,a=t.pageY-e.top;t.target.style.position="absolute",document.body.appendChild(t.target),n(t,r,a),t.target.style.zIndex=1e3,document.onmousemove=e=>{n(e,r,a)},t.target.onmouseup=()=>{document.onmousemove=null,t.target.onmouseup=null},t.target.ondragstart=()=>!1}}),document.addEventListener("keypress",t=>{switch(t.code){case"KeyD":e="default",document.body.style.cursor="default";break;case"KeyP":e="paint",document.body.style.cursor="url(../palette/assets/images/backet.png), auto";break;case"KeyC":e="picker",document.body.style.cursor="url(../palette/assets/images/picker.png), auto";break;case"KeyM":e="move",document.body.style.cursor="url(../palette/assets/images/move.png), auto";break;case"KeyT":e="transform",document.body.style.cursor="url(../palette/assets/images/transform.png), auto";break;default:e="default",document.body.style.cursor="default"}})})();class r{constructor(e){this.state=e}}class a{static draw(e){const t=document.getElementById("drawing-canvas"),n=[];if(t.getContext){const r=t.getContext("2d"),o=t.width/e,s=t.height/e;for(let t=0;t<e;t+=1){const c=[];for(let n=0;n<e;n+=1)r.fillStyle=a.getRandomColor(),c.push(r.fillStyle),r.fillRect(o*t,s*n,o,s);n.push(c)}}return n}static getRandomColor(){let e="#";for(let t=0;t<6;t+=1)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}}class o{constructor(e){this.frameList=e,this.numOfElements=3}addFrame(e){const t=document.createElement("li"),n=document.querySelector(".selected"),r=document.querySelector(".frame-list");n&&n.classList.toggle("selected");const a=e+1;t.setAttribute("data-title-number",a),t.classList.add("frame-container"),t.innerHTML=`<div class="canvas-container">\n                                <canvas width="96" height="96" class="frame-canvas"></canvas>\n                            </div>\n                            <button class="duplicate-frame"><i class="fa fa-copy"></i></button>\n                            <button class="delete-frame"><i class="fa fa-trash-o"></i></button>\n                            <button class="tooltip-frame">${a}</button>\n                            <div class="title-overlay"><i class="fa fa-arrows"></i></div>`;const o=document.querySelectorAll(".frame-container")[e-1];return o?o.after(t):r.appendChild(t),t.classList.add("selected"),t.querySelector(".delete-frame").addEventListener("click",e=>{this.removeFrame(e)}),t.querySelector(".duplicate-frame").addEventListener("click",e=>{this.duplicateFrame(e)}),t}addFrameRandom(){const e=document.querySelector(".frame-list").childElementCount;this.addFrame(e);const t=new r(a.draw(this.numOfElements));this.frameList.addFrame(t),o.draw(t)}static draw(e){const t=document.querySelector(".selected .canvas-container .frame-canvas");if(t.getContext){const n=e.state[0].length,r=e.state.length,a=t.getContext("2d"),o=t.width/n,s=t.height/r;for(let t=0;t<r;t+=1)for(let r=0;r<n;r+=1)a.fillStyle=e.state[t][r],a.fillRect(o*t,s*r,o,s)}}removeFrame(e){let t=e.target.parentElement;t.classList.contains("frame-container")||(t=e.target.parentElement.parentElement);const n=t.getAttribute("data-title-number");if(t.remove(),t.classList.contains("selected")){document.querySelector(".frame-list").lastChild.classList.toggle("selected")}this.frameList.removeFrame(n),o.changeTitleNumber(n)}duplicateFrame(e){let t=e.target.parentElement;t.classList.contains("frame-container")||(t=e.target.parentElement.parentElement);const n=t.getAttribute("data-title-number"),r=this.addFrame(+n);document.querySelector(".selected").classList.toggle("selected"),r.classList.toggle("selected"),o.draw(this.frameList.getFrame(n-1)),this.frameList.addFrameAtIndex(this.frameList.getFrame(n-1),n),o.changeTitleNumber(n)}static changeTitleNumber(e){const t=document.querySelectorAll(".frame-container");for(let n=e-1;n<t.length;n+=1)t[n].setAttribute("data-title-number",n+1),t[n].querySelector(".tooltip-frame").innerText=n+1}}class s{static draw(e){const t=document.querySelector(".preview-canvas");if(t.getContext){const n=e.state[0].length,r=e.state.length,a=t.getContext("2d"),o=t.width/n,s=t.height/r;for(let t=0;t<r;t+=1)for(let r=0;r<n;r+=1)a.fillStyle=e.state[t][r],a.fillRect(o*t,s*r,o,s)}}static requestFullscreen(e){e.requestFullscreen&&(e.requestFullscreen(),e.querySelector("#preview-canvas").setAttribute("width","400"),e.querySelector("#preview-canvas").setAttribute("height","400"))}static exitFullscreen(){document.exitFullscreen&&(document.exitFullscreen(),document.querySelector("#preview-canvas").setAttribute("width","200"),document.querySelector("#preview-canvas").setAttribute("height","200"))}}const c=new class{constructor(){this.state=[]}addFrame(e){this.state.push(e)}addFrameAtIndex(e,t){this.state.splice(t-1,0,e)}swapFrames(e,t){const n=this.state[e];this.state[e]=this.state[t],this.state[t]=n}removeFrame(e){this.state.splice(e-1,1)}getFrame(e){return this.state[e]}get length(){return this.state.length}},l=new o(c);document.querySelector("#view-fullscreen").addEventListener("click",e=>{e.preventDefault(),s.requestFullscreen(document.querySelector(".preview-container"))}),document.querySelector("#exit-fullscreen").addEventListener("click",e=>{e.preventDefault(),s.exitFullscreen()});let d=1;document.querySelector(".add-frame").addEventListener("click",()=>{l.addFrameRandom()}),window.onload=()=>{l.addFrameRandom(),function(){let e=0,t=setInterval(()=>{e>c.length-1&&(e=0);const t=c.state[e];s.draw(t),e+=1},1e3/d);document.querySelector("#range").addEventListener("change",n=>{d=n.target.value,clearInterval(t),t=setInterval(()=>{e>c.length-1&&(e=0);const t=c.state[e];s.draw(t),e+=1},1e3/d)})}()}}]);
//# sourceMappingURL=app.bundle.js.map